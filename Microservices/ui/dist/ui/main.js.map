{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/api.service.ts","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.less","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/jwt.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,4E;;;;;;;;;;;;;;;;;;;;;;;;;ACZ2C;AACO;AAMC;AAOnD;IAGE,oBAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;QAF7B,aAAQ,GAAW,iCAAiC,CAAC;QAG1D,IAAG,MAAM,CAAC,QAAQ,CAAC,QAAQ,IAAI,WAAW,EAAE;YAC1C,IAAI,CAAC,QAAQ,GAAG,wBAAwB,CAAC;SAC1C;IACH,CAAC;IAED,qCAAqC;IAErC,gCAAW,GAAX,UAAY,KAAa;QACvB,OAAO,CAAC,GAAG,CAAC,eAAe,GAAG,KAAK,CAAC,CAAC;QACrC,IAAI,WAAW,GAAG;YAChB,OAAO,EAAE,IAAI,gEAAW,CAAC;gBACvB,eAAe,EAAE,SAAS,GAAG,KAAK;aACnC,CAAC;SACH,CAAC;QACF,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAkB,IAAI,CAAC,QAAQ,GAAG,WAAW,EAAE,WAAW,CAAC,CAAC;IAClF,CAAC;IAED,8BAAS,GAAT,UAAU,KAAa;QACrB,OAAO,CAAC,GAAG,CAAC,eAAe,GAAG,KAAK,CAAC,CAAC;QACrC,IAAI,WAAW,GAAG;YAChB,OAAO,EAAE,IAAI,gEAAW,CAAC;gBACvB,eAAe,EAAE,SAAS,GAAG,KAAK;aACnC,CAAC;SACH,CAAC;QACF,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAgB,IAAI,CAAC,QAAQ,GAAG,SAAS,EAAE,WAAW,CAAC,CAAC;IAC9E,CAAC;IAED,0BAAK,GAAL,UAAM,KAAc;QAClB,IAAG,KAAK,EAAE;YACR,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAM,IAAI,CAAC,QAAQ,GAAG,mBAAmB,CAAC,CAAC;SAChE;aAAM;YACL,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAM,IAAI,CAAC,QAAQ,GAAG,aAAa,CAAC,CAAC;SAC1D;IACH,CAAC;IAED,mCAAc,GAAd,UAAe,KAAkB;QAC/B,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAe,IAAI,CAAC,QAAQ,GAAG,mBAAmB,EAAE;YACvE,OAAO,EAAE;gBACP,aAAa,EAAG;oBACd,OAAO,EAAK,KAAK;oBACjB,QAAQ,EAAE,CAAE,GAAG,CAAE;iBAClB;aACF;SACF,CAAC,CAAC;IACL,CAAC;IAED,iCAAY,GAAZ,UAAa,KAAa;QACxB,OAAO,CAAC,GAAG,CAAC,eAAe,GAAG,KAAK,CAAC,CAAC;QACrC,IAAI,WAAW,GAAG;YAChB,OAAO,EAAE,IAAI,gEAAW,CAAC;gBACvB,eAAe,EAAE,SAAS,GAAG,KAAK;aACnC,CAAC;SACH,CAAC;QACF,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAS,IAAI,CAAC,QAAQ,GAAG,kBAAkB,EAAE,WAAW,CAAC,CAAC;IAChF,CAAC;IA1DU,UAAU;QADtB,gEAAU,EAAE;yCAIe,+DAAU;OAHzB,UAAU,CA4DtB;IAAD,iBAAC;CAAA;AA5DsB;;;;;;;;;;;;;;;;;;;;;;;ACdkB;AACc;AAEvD,IAAM,MAAM,GAAW,EAAE,CAAC;AAM1B;IAAA;IAAgC,CAAC;IAApB,gBAAgB;QAJ5B,8DAAQ,CAAC;YACR,OAAO,EAAE,CAAC,4DAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YACvC,OAAO,EAAE,CAAC,4DAAY,CAAC;SACxB,CAAC;OACW,gBAAgB,CAAI;IAAD,uBAAC;CAAA;AAAJ;;;;;;;;;;;;ACT7B,4FAA4F,+vFAA+vF,wnBAAwnB,qBAAqB,uGAAuG,qBAAqB,qGAAqG,qBAAqB,0FAA0F,qBAAqB,4FAA4F,2QAA2Q,uDAAuD,eAAe,gHAAgH,cAAc,gDAAgD,qBAAqB,4BAA4B,0BAA0B,uKAAuK,+iBAA+iB,kBAAkB,0cAA0c,gBAAgB,sGAAsG,0jBAA0jB,uDAAuD,eAAe,gHAAgH,cAAc,gDAAgD,qBAAqB,4BAA4B,0BAA0B,uKAAuK,uaAAua,SAAS,6fAA6f,UAAU,yBAAyB,kCAAkC,yBAAyB,oBAAoB,iGAAiG,WAAW,KAAK,uBAAuB,2DAA2D,2BAA2B,yBAAyB,sBAAsB,iCAAiC,wBAAwB,uI;;;;;;;;;;;ACAhqQ,+DAA+D,+H;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAb;AACP;AAIX;AACJ;AAEqB;AAOjD;IAYE,sBAAoB,UAAsB,EAAU,KAAqB;QAArD,eAAU,GAAV,UAAU,CAAY;QAAU,UAAK,GAAL,KAAK,CAAgB;QAXlE,aAAQ,GAAc,EAAE,CAAC;QAEzB,qBAAgB,GAAc,EAAE,CAAC;QACjC,WAAM,GAAY,EAAE,CAAC;QAE5B,aAAQ,GAAW,EAAE,CAAC;QACf,eAAU,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;QAEtC,QAAG,GAAQ,IAAI,wCAAG,EAAE,CAAC;IAGiD,CAAC;IAE9E,+BAAQ,GAAR;QAAA,iBAoBC;QAnBC,IAAI,CAAC,KAAK,CAAC,WAAW;aACnB,SAAS,CAAC,gBAAM;YACf,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;YACvB,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;YACvB,IAAG,IAAI,IAAI,SAAS,IAAI,IAAI,IAAI,SAAS,EAAE;gBACzC,KAAI,CAAC,UAAU,GAAG,SAAS,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC;gBAChD,KAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,KAAI,CAAC,UAAU,CAAC;aAC5C;QACH,CAAC,CACF,CAAC;QAEF,IAAM,KAAK,GAAG,qDAAQ,CAAC,IAAI,CAAC,CAAC;QAC7B,KAAK,CAAC,SAAS,CAAC,WAAC;YACf,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,GAAG,KAAI,CAAC,QAAQ,CAAC,CAAC;YACpD,IAAI,CAAC,GAAG,KAAI,CAAC,QAAQ,KAAK,CAAC;gBACzB,KAAI,CAAC,SAAS,EAAE;QACpB,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED,qCAAc,GAAd;QAAA,iBAYC;QAXC,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;QAC/B,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;QAC3B,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,SAAS,CACvD,iBAAO;YACL,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;YACrB,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,iBAAO;gBAC/B,KAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;gBAC5C,+BAA+B;YACjC,CAAC,CAAC,CAAC;QACL,CAAC,CACF,CAAC;IACJ,CAAC;IAED,kCAAW,GAAX;QAAA,iBAMC;QALC,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,SAAS,CAC1D,kBAAQ;YACN,KAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;QACpC,CAAC,CACF,CAAC;IACJ,CAAC;IAED,4BAAK,GAAL,UAAM,KAAc;QAApB,iBAMC;QALC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,SAAS,CACpC,aAAG;YACD,KAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACjB,CAAC,CACF,CAAC;IACJ,CAAC;IAED,mCAAY,GAAZ,UAAa,KAAa;QAA1B,iBAUC;QATC,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,SAAS,CAC3C,kBAAQ;YACN,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;QACjD,CAAC,EACD,aAAG;YACD,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,KAAI,CAAC,cAAc,GAAG,iFAAiF,CAAC;QAC1G,CAAC,CACF,CAAC;IACJ,CAAC;IAED,gCAAS,GAAT;QAAA,iBAOC;QANC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,SAAS,CACxD,kBAAQ;YACN,KAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;QAChC,CAAC,CACF,CAAC;IACJ,CAAC;IAED,oCAAa,GAAb;QACE,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC;QAC3C,IAAI,CAAC,OAAO,GAAG,6FACgD,IAAI,CAAC,UAAU,CAAC,QAAQ,sGACjB,IAAI,CAAC,UAAU,CAAC,QAAQ,oGAClC,IAAI,CAAC,UAAU,CAAC,QAAQ,yFACvB,IAAI,CAAC,UAAU,CAAC,QAAQ,0BAClF,CAAC;QAEJ,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAED,qCAAc,GAAd,UAAe,QAAQ;QACrB,KAAK,CAAC,cAAc,EAAE;QACtB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC3B,CAAC;IAxGU,YAAY;QALxB,+DAAS,CAAC;YACT,QAAQ,EAAE,UAAU;;;SAGrB,CAAC;yCAagC,uDAAU,EAAiB,8DAAc;OAZ9D,YAAY,CAyGxB;IAAD,mBAAC;CAAA;AAzGwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfiC;AACjB;AACI;AAEW;AACT;AAES;AAEb;AAe3C;IAAA;IAAyB,CAAC;IAAb,SAAS;QAbrB,8DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAY;aACb;YACD,OAAO,EAAE;gBACP,uEAAa;gBACb,oEAAgB;gBAChB,qEAAgB;gBAChB,0DAAW;aACZ;YACD,SAAS,EAAE,CAAC,uDAAU,CAAC;YACvB,SAAS,EAAE,CAAC,2DAAY,CAAC;SAC1B,CAAC;OACW,SAAS,CAAI;IAAD,gBAAC;CAAA;AAAJ;;;;;;;;;;;;;ACxBtB;AAAA;AAAA;IAAA;QACI,iBAAY,GAAW,EAAE,CAAC;IAC9B,CAAC;IAAD,UAAC;AAAD,CAAC;;;;;;;;;;;;;;ACFD;AAAA;AAAA,gFAAgF;AAChF,0EAA0E;AAC1E,gEAAgE;AAEzD,IAAM,WAAW,GAAG;IACzB,UAAU,EAAE,KAAK;IACjB,WAAW,EAAE,wBAAwB;CACtC,CAAC;AAEF;;;;;;GAMG;AACH,mEAAmE;;;;;;;;;;;;;AChBnE;AAAA;AAAA;AAAA;AAAA;AAA+C;AAC4B;AAE9B;AACY;AAEzD,IAAI,qEAAW,CAAC,UAAU,EAAE;IAC1B,oEAAc,EAAE,CAAC;CAClB;AAED,gGAAsB,EAAE,CAAC,eAAe,CAAC,yDAAS,CAAC;KAChD,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,KAAK,CAAC,GAAG,CAAC,EAAlB,CAAkB,CAAC,CAAC","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { Product } from './product';\nimport { Order } from './order';\nimport { environment } from '../environments/environment';\nimport { Jwt } from './jwt';\nimport { HttpHeaders } from '@angular/common/http';\nimport { SearchResult } from './searchresult';\nimport { SearchQuery } from './searchquery';\nimport { ProductResponse } from './product-response';\nimport { OrderResponse } from './order-response';\n\n@Injectable()\nexport class ApiService {\n  public endpoint: string = \"http://rvstoreapi.vergeops.com/\"; \n  \n  constructor(private http: HttpClient) { \n    if(window.location.hostname == 'localhost') {\n      this.endpoint = \"http://localhost:30090\";\n    }\n  }\n\n  //endpoint = environment.apiEndpoint;\n\n  getProducts(token: string): Observable<ProductResponse> {\n    console.log(\"Using token: \" + token);\n    let httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': 'Bearer ' + token\n      })\n    };\n    return this.http.get<ProductResponse>(this.endpoint + \"/products\", httpOptions);\n  }\n\n  getOrders(token: string): Observable<OrderResponse> {\n    console.log(\"Using token: \" + token);\n    let httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': 'Bearer ' + token\n      })\n    };\n    return this.http.get<OrderResponse>(this.endpoint + \"/orders\", httpOptions);\n  }\n\n  login(admin: boolean): Observable<Jwt> {\n    if(admin) {\n      return this.http.get<Jwt>(this.endpoint + \"/auth/login/admin\");\n    } else {\n      return this.http.get<Jwt>(this.endpoint + \"/auth/login\");\n    }\n  }\n\n  searchProducts(query: SearchQuery): Observable<SearchResult> {\n    return this.http.post<SearchResult>(this.endpoint + \"/products/_search\", {\n      \"query\": {\n        \"multi_match\" : {\n          \"query\":    query, \n          \"fields\": [ \"*\" ] \n        }\n      }\n    });\n  }\n\n  accessSecure(token: string): Observable<string> {\n    console.log(\"Using token: \" + token);\n    let httpOptions = {\n      headers: new HttpHeaders({\n        'Authorization': 'Bearer ' + token\n      })\n    };\n    return this.http.get<string>(this.endpoint + \"/products/secure\", httpOptions);\n  }\n\n}","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","module.exports = \"<nav class=\\\"navbar navbar-dark bg-primary\\\">\\n  <h1 style=\\\"color: white;\\\">RV Store</h1>\\n</nav>\\n<div class=\\\"container-fluid\\\">\\n  <h4>Welcome to the RV Store, a demonstration application meant for learning Docker and Kubernetes.</h4>\\n  <p>\\n    <button class=\\\"btn btn-primary\\\" type=\\\"button\\\" data-toggle=\\\"collapse\\\" data-target=\\\"#collapseExample\\\"\\n      aria-expanded=\\\"false\\\" aria-controls=\\\"collapseExample\\\">\\n      Expand Instructions\\n    </button>\\n  </p>\\n  <div class=\\\"collapse\\\" id=\\\"collapseExample\\\">\\n    <div class=\\\"card card-body\\\">\\n      <h4>This application is broken down into several microservices to help you learn:</h4>\\n      <ul>\\n        <li>A UI service: You're looking at it</li>\\n        <li>A product API service: Sends back a list of products</li>\\n        <li>An authentication API service: Send back an OAuth token (a JSON Web Token, or JWT)</li>\\n        <li>An order API service: Receives orders and sends back a list of orders</li>\\n        <li>An order simulator: Runs as a background service and submits orders periodically</li>\\n        <li>An Elasticsearch database: Stores products in a searchable form that enables search</li>\\n        <li>A product sync service: Reads products from the product API service and pushes them to Elasticsearch</li>\\n        <li>A gateway service: Acts as a central entrypoint to the API, and routes requests to the auth, product, and\\n          order services based on the HTTP path</li>\\n        <li>A MongoDB database to store orders</li>\\n      </ul>\\n\\n      <h4>Your goals are (in order of importance)</h4>\\n      <ol>\\n        <li>Set up the application to run in Kubernetes. For this hackathon, Minikube or Docker Kubernetes for Desktop\\n          is fine.</li>\\n        <li>Centralize configurations (environment variables)</li>\\n        <li>Put any sensitive information into secrets</li>\\n        <li>Ensure that only public services are accessible outside the cluster. These are the gateway service and the\\n          UI.</li>\\n        <li>Make the app fault-tolerant\\n          <ul>\\n            <li>Make services redundant\\n            <li>Set up probes\\n            <li>Try to break it!\\n          </ul>\\n        </li>\\n        <li>For MongoDB, set up a volume mapping to your hard drive so that the MongoDB pod can be thrown out and not\\n          lose orders.</li>\\n        <li>Once everything is running, release version 2.0 of the UI. Once verified, you’ve realized that there’s a\\n          problem (the styling is hideous). Try rolling back.</li>\\n        <li>If we covered HorizontalPodAutoscaler in this class, try adding scaling to one of your deployments, like the\\n          product API.</li>\\n      </ol>\\n      <h4>Architecture Diagram</h4>\\n      <img src=\\\"/assets/diagram.png\\\" width=\\\"1005px\\\" />\\n    </div>\\n  </div>\\n\\n\\n\\n  <div class=\\\"card\\\" style=\\\"margin-top: 2em;\\\">\\n    <h5 class=\\\"card-header\\\">Step 1: Set the API base URL</h5>\\n    <div class=\\\"card-body\\\">\\n      <p>Before any data will show up, you must tell this UI application where to access the API. The port number is up to you, so update the text box below and click update.</p>\\n      <form>\\n        Backend host name: <input name=\\\"backendUrl\\\" type=\\\"text\\\" size=\\\"100\\\" [(ngModel)]=\\\"backendUrl\\\"> <button\\n          type=\\\"submit\\\" class=\\\"btn btn-primary\\\" (click)=\\\"updateBackend()\\\">Update</button>\\n      </form>\\n      <div>Making calls to:</div>\\n      <div>Product API <span class=\\\"badge badge-pill badge-primary\\\">{{apiService.endpoint}}/products</span></div>\\n      <div>Product Search API <span class=\\\"badge badge-pill badge-primary\\\">{{apiService.endpoint}}/products/_search</span></div>\\n      <div>Auth API <span class=\\\"badge badge-pill badge-primary\\\">{{apiService.endpoint}}/auth</span></div>\\n      <div>Order API <span class=\\\"badge badge-pill badge-primary\\\">{{apiService.endpoint}}/orders</span></div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"card\\\" style=\\\"margin-top: 2em;\\\">\\n    <h5 class=\\\"card-header\\\">Step 2: Test product service</h5>\\n    <div class=\\\"card-body\\\">\\n      <div class=\\\"row\\\">\\n        <div *ngFor=\\\"let product of products\\\">\\n          <div class=\\\"col-sm-2\\\">\\n            <div class=\\\"card\\\" style=\\\"width: 18rem;\\\">\\n              <img class=\\\"card-img-top\\\" src=\\\"{{product.image}}\\\" alt=\\\"Card image cap\\\">\\n              <div class=\\\"card-body\\\">\\n                <h5 class=\\\"card-title\\\">{{product.name}}</h5>\\n                <p class=\\\"card-text\\\">{{product.description}}</p>\\n                <h4>{{product.price | currency}}</h4>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"card\\\" style=\\\"margin-top: 2em;\\\">\\n    <h5 class=\\\"card-header\\\">Step 3: Test auth service</h5>\\n    <div class=\\\"card-body\\\">\\n      <p>The login button sends a request to the auth API and retrieves a JWT. The JWT is displayed on screen below the\\n        button.</p>\\n      <div>\\n        <div><button class=\\\"btn btn-primary\\\" (click)=\\\"login(false)\\\">Login</button></div>\\n        <div><button class=\\\"btn btn-primary\\\" (click)=\\\"login(true)\\\">Login as Admin</button></div>\\n        <div *ngIf=\\\"jwt\\\">\\n          <strong>JWT:</strong> <span class=\\\"badge badge-pill badge-primary\\\">{{jwt.access_token}}</span>\\n          </div>\\n      </div>\\n      <p>Once a JWT has been retrieved, then this next button should work and you should see a success message on\\n        screen.\\n        NOTE: This button won't work until the product service is running.</p>\\n      <div>\\n        <button class=\\\"btn btn-warn\\\" (click)=\\\"accessSecure(jwt.access_token)\\\">Access Secure Endpoint</button>\\n        <div>\\n          <strong>Response from protected service:</strong> {{secureResponse}}\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"card\\\" style=\\\"margin-top: 2em;\\\">\\n    <h5 class=\\\"card-header\\\">Step 4: Test product search service</h5>\\n    <div class=\\\"card-body\\\">\\n      <div class=\\\"row\\\">\\n        <form>\\n          Search term: <input name=\\\"searchTerm\\\" type=\\\"text\\\" size=\\\"100\\\" [(ngModel)]=\\\"searchTerm\\\"> <button\\n            type=\\\"submit\\\" class=\\\"btn btn-primary\\\" (click)=\\\"searchProducts()\\\">Search</button>\\n        </form>\\n      </div>\\n      <div class=\\\"row\\\">\\n        <div *ngFor=\\\"let product of searchedProducts\\\">\\n          <div class=\\\"col-sm-2\\\">\\n            <div class=\\\"card\\\" style=\\\"width: 18rem;\\\">\\n              <img class=\\\"card-img-top\\\" src=\\\"{{product.image}}\\\" alt=\\\"Card image cap\\\">\\n              <div class=\\\"card-body\\\">\\n                <h5 class=\\\"card-title\\\">{{product.name}}</h5>\\n                <p class=\\\"card-text\\\">{{product.description}}</p>\\n                <h4>{{product.price | currency}}</h4>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <div class=\\\"card\\\" style=\\\"margin-top: 2em;\\\">\\n    <h5 class=\\\"card-header\\\">Step 5: Test order service</h5>\\n    <div class=\\\"card-body\\\">\\n      <p><a href=\\\"#\\\" (click)=\\\"updateInterval(10)\\\">10</a> | <a href=\\\"#\\\" (click)=\\\"updateInterval(30)\\\">30</a> | <a href=\\\"#\\\"\\n          (click)=\\\"updateInterval(60)\\\">60</a> | <a href=\\\"#\\\" (click)=\\\"updateInterval(120)\\\">120</a> seconds <i\\n          *ngIf=\\\"orders.length == 0\\\" class=\\\"fas fa-sync fa-spin\\\"></i> {{loading}}</p>\\n      <table class=\\\"table table-striped\\\">\\n        <thead>\\n          <tr>\\n            <th scope=\\\"col\\\">ID</th>\\n            <th scope=\\\"col\\\">Date</th>\\n            <th scope=\\\"col\\\">Customer</th>\\n            <th scope=\\\"col\\\">Items</th>\\n            <th scope=\\\"col\\\">Subtotal</th>\\n            <th scope=\\\"col\\\">Tax</th>\\n            <th scope=\\\"col\\\">Total</th>\\n          </tr>\\n        </thead>\\n        <tbody>\\n          <tr *ngFor=\\\"let order of orders\\\">\\n            <th scope=\\\"row\\\">{{order.id}}</th>\\n            <td>{{order.orderDate | date: 'medium'}}</td>\\n            <td>{{order.customerName}}</td>\\n            <td>\\n              <p *ngFor=\\\"let item of order.items\\\">\\n                {{item.name}} - {{item.price | currency}}\\n              </p>\\n            </td>\\n            <td>{{order.subTotal | currency}}</td>\\n            <td>{{order.tax | currency}}</td>\\n            <td><strong>{{order.total | currency}}</strong></td>\\n          </tr>\\n        </tbody>\\n      </table>\\n    </div>\\n  </div>\\n\\n\\n  <router-outlet></router-outlet>\\n</div>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQubGVzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { ApiService } from './api.service';\nimport { Product } from './product';\n\nimport { Observable } from 'rxjs';\nimport { interval } from 'rxjs';\nimport { Jwt } from './jwt';\nimport { Order } from './order';\nimport { ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.less']\n})\nexport class AppComponent implements OnInit {\n  public products: Product[] = [];\n  public searchTerm;\n  public searchedProducts: Product[] = [];\n  public orders: Order[] = [];\n  timeLeft: number;\n  interval: number = 60;\n  public backendUrl = this.apiService.endpoint;\n  public message;\n  public jwt: Jwt = new Jwt();\n  public secureResponse: string;\n\n  constructor(private apiService: ApiService, private route: ActivatedRoute) { }\n\n  ngOnInit() {\n    this.route.queryParams\n      .subscribe(params => {\n        let host = params.host;\n        let port = params.port;\n        if(host != undefined && port != undefined) {\n          this.backendUrl = \"http://\" + host + \":\" + port;\n          this.apiService.endpoint = this.backendUrl;\n        }\n      }\n    );\n    \n    const timer = interval(1000);\n    timer.subscribe(n => {\n      this.timeLeft = this.interval - (n % this.interval);\n      if (n % this.interval === 0)\n        this.getOrders()\n    });\n\n    this.getProducts();\n  }\n\n  searchProducts() {\n    console.log(\"Search results:\");\n    this.searchedProducts = [];\n    this.apiService.searchProducts(this.searchTerm).subscribe(\n      results => {\n        console.log(results);\n        results.hits.hits.forEach(product => {\n          this.searchedProducts.push(product._source);\n          //console.log(product._source);\n        });\n      }\n    );\n  }\n\n  getProducts() {\n    this.apiService.getProducts(this.jwt.access_token).subscribe(\n      products => {\n        this.products = products.products;\n      }\n    );\n  }\n\n  login(admin: boolean) {\n    this.apiService.login(admin).subscribe(\n      jwt => {\n        this.jwt = jwt;\n      }\n    );\n  }\n\n  accessSecure(token: string) {\n    this.apiService.accessSecure(token).subscribe(\n      response => {\n        this.secureResponse = JSON.stringify(response);\n      },\n      err => {\n        console.log(err);\n        this.secureResponse = \"Not allowed! An invalid or missing JWT caused the service to reject the request\";\n      }\n    );\n  }\n\n  getOrders() {\n    this.orders = [];\n    this.apiService.getOrders(this.jwt.access_token).subscribe(\n      response => {\n        this.orders = response.orders;\n      }\n    );\n  }\n\n  updateBackend() {\n    this.apiService.endpoint = this.backendUrl;\n    this.message = `Making calls to:<br/>\n      Product API <span class=\\\"badge badge-pill badge-primary\\\">${this.apiService.endpoint}products</span><br/>\n      Product Search API <span class=\\\"badge badge-pill badge-primary\\\">${this.apiService.endpoint}products/_search</span><br/>\n      Auth API <span class=\\\"badge badge-pill badge-primary\\\">${this.apiService.endpoint}auth</span><br/>\n      Order API <span class=\\\"badge badge-pill badge-primary\\\">${this.apiService.endpoint}orders</span>\n      `;\n    \n    this.getProducts();\n    this.getOrders();\n    this.searchProducts();\n  }\n\n  updateInterval(interval) {\n    event.preventDefault()\n    this.interval = interval;\n  }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\n\nimport { HttpClientModule } from '@angular/common/http';\n\nimport { ApiService } from './api.service';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    HttpClientModule,\n    FormsModule\n  ],\n  providers: [ApiService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","export class Jwt {\n    access_token: string = \"\";\n}","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  apiEndpoint: 'http://localhost:9000/'\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":""}